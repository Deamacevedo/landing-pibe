---
// GaleriaLegado component - Galería masonry interactiva del Pibe Valderrama
import { Image } from "astro:assets";

// Importar todas las imágenes
import pibe1 from "../assets/pibe1.jpg";
import pibeFamily from "../assets/timeline/pibe-family.jpg";
import pibeYoung from "../assets/timeline/pibe-young.jpg";
import pibeSeleccion from "../assets/timeline/pibe-seleccion.jpg";
import pibeJunior from "../assets/timeline/pibe-junior.jpg";
import pibeRetiro from "../assets/timeline/pibe-retiro.jpg";
import legacy from "../assets/timeline/legacy.jpg";
import magdalena from "../assets/timeline/magdalena.jpg";
import mont from "../assets/timeline/mont.jpg";
import pibeIntro from "../assets/momentos/pibe-intro.webp";
import pibeb from "../assets/momentos/pibeb.jpg";
import mls from "../assets/momentos/mls.jpg";

// Configuración de imágenes con metadata
const galeriaImages = [
  {
    src: pibe1,
    alt: "Pibe Valderrama - Retrato icónico",
    categoria: "presente",
    size: "large",
    title: "El Ícono Colombiano",
    description: "Símbolo del fútbol y la cultura colombiana"
  },
  {
    src: pibeSeleccion,
    alt: "Pibe Valderrama con la Selección Colombia",
    categoria: "seleccion",
    size: "medium",
    title: "Capitán de la Tricolor",
    description: "111 partidos defendiendo los colores patrios"
  },
  {
    src: pibeYoung,
    alt: "Pibe Valderrama joven",
    categoria: "juventud",
    size: "small",
    title: "Los Primeros Pasos",
    description: "El inicio de una leyenda en Santa Marta"
  },
  {
    src: pibeJunior,
    alt: "Pibe Valderrama en Junior",
    categoria: "clubes",
    size: "medium",
    title: "Gloria en Junior",
    description: "Campeón con el equipo de sus amores"
  },
  {
    src: mls,
    alt: "Pibe Valderrama en MLS",
    categoria: "internacional",
    size: "large",
    title: "Conquista Internacional",
    description: "Llevando su magia al fútbol estadounidense"
  },
  {
    src: pibeFamily,
    alt: "Pibe Valderrama en familia",
    categoria: "familia",
    size: "small",
    title: "El Hombre Familiar",
    description: "Padre y esposo ejemplar"
  },
  {
    src: legacy,
    alt: "Legado del Pibe Valderrama",
    categoria: "legado",
    size: "medium",
    title: "Legado Eterno",
    description: "Inspiración para futuras generaciones"
  },
  {
    src: magdalena,
    alt: "Pibe Valderrama en Magdalena",
    categoria: "raices",
    size: "small",
    title: "Orgullo Magdalenense",
    description: "Representando su tierra natal"
  },
  {
    src: mont,
    alt: "Pibe Valderrama en Montpellier",
    categoria: "internacional",
    size: "medium",
    title: "Éxito Europeo",
    description: "Campeón de la Copa de Francia"
  },
  {
    src: pibeRetiro,
    alt: "Retiro del Pibe Valderrama",
    categoria: "retiro",
    size: "large",
    title: "Despedida de un Grande",
    description: "El adiós de una leyenda viviente"
  },
  {
    src: pibeIntro,
    alt: "Pibe Valderrama presentación",
    categoria: "presente",
    size: "small",
    title: "Siempre Vigente",
    description: "Continuando su legado fuera de las canchas"
  },
  {
    src: pibeb,
    alt: "Pibe Valderrama momento especial",
    categoria: "momentos",
    size: "medium",
    title: "Momentos Únicos",
    description: "Instantes que quedaron en la historia"
  }
];

const categorias = [
  { id: 'todas', label: 'Todas las fotos', color: 'bg-pibe-gold' },
  { id: 'seleccion', label: 'Selección', color: 'bg-blue-600' },
  { id: 'clubes', label: 'Clubes', color: 'bg-red-600' },
  { id: 'internacional', label: 'Internacional', color: 'bg-green-600' },
  { id: 'familia', label: 'Familia', color: 'bg-purple-600' },
  { id: 'presente', label: 'Presente', color: 'bg-orange-600' }
];
---

<section id="galeria" class="py-16 md:py-24 bg-gradient-to-b from-gray-900 via-black to-gray-800 relative overflow-hidden">
  <!-- Elementos decorativos -->
  <div class="absolute inset-0 opacity-10">
    <div class="absolute top-20 left-20 w-96 h-96 bg-pibe-gold rounded-full blur-3xl"></div>
    <div class="absolute bottom-20 right-20 w-80 h-80 bg-blue-500 rounded-full blur-3xl"></div>
  </div>

  <div class="container mx-auto px-4 md:px-6 relative z-10">
    <!-- Header de la sección -->
    <div class="text-center mb-12 md:mb-16">
      <h2 class="font-display text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-6">
        Galería de <span class="text-pibe-gold">Legado</span>
      </h2>
      <p class="text-lg md:text-xl text-gray-300 max-w-3xl mx-auto">
        Un recorrido visual por la vida y carrera del ícono más auténtico del fútbol colombiano
      </p>
    </div>

    <!-- Filtros -->
    <div class="flex flex-wrap justify-center gap-3 md:gap-4 mb-8 md:mb-12">
      {categorias.map((categoria) => (
        <button
          data-filter={categoria.id}
          class={`filter-btn px-4 md:px-6 py-2 md:py-3 rounded-full text-white font-semibold text-sm md:text-base transition-all duration-300 ${categoria.color} ${categoria.id === 'todas' ? 'active' : 'opacity-70 hover:opacity-100'}`}
        >
          {categoria.label}
        </button>
      ))}
    </div>

    <!-- Grid Masonry -->
    <div id="galeria-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8">
      {galeriaImages.map((imagen, index) => (
        <div
          class={`galeria-item cursor-pointer group ${imagen.categoria} ${
            imagen.size === 'large' ? 'md:row-span-2' :
            imagen.size === 'medium' ? 'md:row-span-1' :
            'md:row-span-1'
          }`}
          data-categoria={imagen.categoria}
          data-lightbox="galeria"
          data-title={imagen.title}
          data-description={imagen.description}
        >
          <div class="relative overflow-hidden rounded-2xl shadow-2xl transform transition-all duration-500 hover:scale-105 hover:shadow-3xl h-full">
            <Image
              src={imagen.src}
              alt={imagen.alt}
              class={`w-full h-full object-cover transition-transform duration-700 group-hover:scale-110 ${
                imagen.size === 'large' ? 'min-h-[400px] md:min-h-[500px]' :
                imagen.size === 'medium' ? 'min-h-[280px] md:min-h-[320px]' :
                'min-h-[240px] md:min-h-[280px]'
              }`}
              loading="lazy"
            />

            <!-- Overlay con información -->
            <div class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300">
              <div class="absolute bottom-0 left-0 right-0 p-4 md:p-6">
                <h3 class="text-white font-bold text-lg md:text-xl mb-2">{imagen.title}</h3>
                <p class="text-gray-200 text-sm md:text-base">{imagen.description}</p>

                <!-- Botón de expandir -->
                <div class="mt-3 flex items-center text-pibe-gold text-sm font-semibold">
                  <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                  </svg>
                  Ver detalle
                </div>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>

    <!-- Estadísticas de la galería -->
    <div class="mt-16 bg-pibe-gold/10 backdrop-blur-sm rounded-3xl p-8 md:p-12 text-center border border-pibe-gold/20">
      <h3 class="text-2xl md:text-3xl font-bold text-white mb-6">Una Vida en Imágenes</h3>
      <div class="grid grid-cols-2 md:grid-cols-4 gap-6">
        <div>
          <div class="text-3xl md:text-4xl font-bold text-pibe-gold mb-2">40+</div>
          <div class="text-gray-300">Años de Carrera</div>
        </div>
        <div>
          <div class="text-3xl md:text-4xl font-bold text-pibe-gold mb-2">3</div>
          <div class="text-gray-300">Mundiales</div>
        </div>
        <div>
          <div class="text-3xl md:text-4xl font-bold text-pibe-gold mb-2">111</div>
          <div class="text-gray-300">Partidos Selección</div>
        </div>
        <div>
          <div class="text-3xl md:text-4xl font-bold text-pibe-gold mb-2">∞</div>
          <div class="text-gray-300">Legado Eterno</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal Lightbox -->
  <div id="lightbox" class="fixed inset-0 bg-black/90 backdrop-blur-sm z-50 hidden items-center justify-center p-4">
    <div class="relative max-w-4xl max-h-full">
      <button id="close-lightbox" class="absolute -top-12 right-0 text-white hover:text-pibe-gold text-2xl">
        <svg class="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>

      <div id="lightbox-content" class="bg-white rounded-2xl overflow-hidden">
        <!-- Contenido dinámico -->
      </div>

      <!-- Navegación -->
      <button id="prev-image" class="absolute left-4 top-1/2 transform -translate-y-1/2 text-white hover:text-pibe-gold text-3xl">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
        </svg>
      </button>

      <button id="next-image" class="absolute right-4 top-1/2 transform -translate-y-1/2 text-white hover:text-pibe-gold text-3xl">
        <svg class="w-10 h-10" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
        </svg>
      </button>
    </div>
  </div>
</section>

<style>
  /* Grid personalizado */
  #galeria-grid {
    display: grid;
    grid-template-rows: masonry;
    grid-auto-rows: 280px;
  }

  @supports not (grid-template-rows: masonry) {
    #galeria-grid {
      display: grid;
      grid-auto-rows: auto;
    }
  }

  /* Animaciones para las imágenes */
  .galeria-item {
    transition: all 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    display: block;
  }

  .galeria-item.hidden {
    opacity: 0;
    transform: scale(0.8);
    pointer-events: none;
  }

  /* Efectos hover mejorados */
  .galeria-item:hover {
    z-index: 10;
  }

  /* Filtros activos */
  .filter-btn.active {
    opacity: 1;
    transform: scale(1.05);
    box-shadow: 0 8px 25px rgba(252, 221, 9, 0.3);
  }

  /* Responsive grid */
  @media (max-width: 768px) {
    #galeria-grid {
      grid-template-columns: 1fr;
      grid-auto-rows: 250px;
      gap: 1rem;
    }
  }

  @media (min-width: 769px) and (max-width: 1024px) {
    #galeria-grid {
      grid-template-columns: repeat(2, 1fr);
      grid-auto-rows: 280px;
    }
  }

  @media (min-width: 1025px) and (max-width: 1280px) {
    #galeria-grid {
      grid-template-columns: repeat(3, 1fr);
      grid-auto-rows: 300px;
    }
  }

  @media (min-width: 1281px) {
    #galeria-grid {
      grid-template-columns: repeat(4, 1fr);
      grid-auto-rows: 320px;
    }
  }

  /* Tamaños específicos para elementos grandes */
  .galeria-item.md\:row-span-2 {
    grid-row: span 2;
  }

  /* Lightbox styling */
  #lightbox {
    backdrop-filter: blur(10px);
  }

  /* Animación de entrada para las imágenes */
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(30px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  .galeria-item {
    animation: fadeInUp 0.6s ease-out forwards;
    opacity: 0;
  }

  /* Stagger animation */
  .galeria-item:nth-child(1) { animation-delay: 0.1s; }
  .galeria-item:nth-child(2) { animation-delay: 0.2s; }
  .galeria-item:nth-child(3) { animation-delay: 0.3s; }
  .galeria-item:nth-child(4) { animation-delay: 0.4s; }
  .galeria-item:nth-child(5) { animation-delay: 0.5s; }
  .galeria-item:nth-child(6) { animation-delay: 0.6s; }
  .galeria-item:nth-child(7) { animation-delay: 0.7s; }
  .galeria-item:nth-child(8) { animation-delay: 0.8s; }
  .galeria-item:nth-child(9) { animation-delay: 0.9s; }
  .galeria-item:nth-child(10) { animation-delay: 1s; }
  .galeria-item:nth-child(11) { animation-delay: 1.1s; }
  .galeria-item:nth-child(12) { animation-delay: 1.2s; }
</style>

<script src="../scripts/galeria-legado.js"></script>